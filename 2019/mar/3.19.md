dfs, in each layer, compute the max and return the current max, ie, the max length including the current node