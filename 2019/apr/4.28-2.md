BFS or DFS and conditional 